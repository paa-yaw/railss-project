<% breadcrumb :history, @workers %>
<div class="admin-page">
  <div class="container">
  <div class="row">
    <div class="col-sm-9 col-sm-offset-1 form-box">


    <div class="row">
                
        <div class="col-lg-12 col-md-12">  
          <div class="panel panel-default">
            <div class="panel-heading">
              <h2><i class="fa fa-user"></i><strong><%= pluralize(Worker.count, "Worker") %></strong></h2>
            </div>
            <div class="panel-body">
              <table class="table bootstrap-datatable countries">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th></th>
                    <th></th>
                  </tr>
                </thead>  


                <% if @workers.count == 0 %>
                <h1>No workers yet.</h1>
                <% else %>
                <% @workers.each do |worker| %>
                <% if worker.requests.any? %>
                
                <tbody>
                  <tr>
                    
                    <% if worker.reports.any? %>
                    <td><%= link_to worker.first_name, admin_worker_path(worker) %>, <%= link_to worker.last_name, admin_worker_path(worker) %> <i class="fa fa-flag" aria-hidden="true" style="color:red"></i></td>
                    <% else %>
                    <td><%= link_to worker.first_name, admin_worker_path(worker) %>, <%= link_to worker.last_name, admin_worker_path(worker) %></td>
                    <% end %>
                    <td><%= link_to fa_icon("eye") + " View History", admin_worker_history_path(worker), class: "btn btn-info" %></td>
                    <td><%= link_to fa_icon("trash") +" Remove", admin_worker_path(worker), method: :delete, data: { confirm: "Are you sure you want to delete #{worker.first_name} from the database?"}, class: "btn btn-danger" %></td>
                  </tr>
                  <% else %>
                  <tr>
                    
                    <% if worker.reports.any? %>
                    <td><%= link_to worker.first_name, admin_worker_path(worker) %>, <%= link_to worker.last_name, admin_worker_path(worker) %> <i class="fa fa-flag" aria-hidden="true" style="color:red"></i></td>
                    <% else %>
                    <td><%= link_to worker.first_name, admin_worker_path(worker) %>, <%= link_to worker.last_name, admin_worker_path(worker) %></td>
                    <% end %>
                    <td><%= link_to fa_icon("eye") + " View History", admin_worker_history_path(worker), class: "btn btn-info" %></td>
                    <td><%= link_to fa_icon("trash") + " Remove", admin_worker_path(worker), method: :delete, data: { confirm: "Are you sure you want to delete #{worker.first_name} from the database?"}, class: "btn btn-danger" %></td>
                  </tr>
                  
                </tbody>
                  <% end %>
                  <% end %>
                  <% end %>
              </table>
            </div>
  
          </div>  

  
  

</div>
</div>
<%= link_to fa_icon("plus") + " Register Worker", new_admin_worker_path, class: "btn btn-primary" %>
</div>
</div>
</div>
</div>